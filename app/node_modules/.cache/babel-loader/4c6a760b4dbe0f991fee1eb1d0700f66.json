{"remainingRequest":"/Users/zoulan/Desktop/web-learn-static/vue/2020-08-15-vue-04/作业/app/node_modules/babel-loader/lib/index.js!/Users/zoulan/Desktop/web-learn-static/vue/2020-08-15-vue-04/作业/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zoulan/Desktop/web-learn-static/vue/2020-08-15-vue-04/作业/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zoulan/Desktop/web-learn-static/vue/2020-08-15-vue-04/作业/app/src/views/Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zoulan/Desktop/web-learn-static/vue/2020-08-15-vue-04/作业/app/src/views/Main.vue","mtime":1598188082696},{"path":"/Users/zoulan/Desktop/web-learn-static/vue/2020-08-15-vue-04/作业/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zoulan/Desktop/web-learn-static/vue/2020-08-15-vue-04/作业/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zoulan/Desktop/web-learn-static/vue/2020-08-15-vue-04/作业/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zoulan/Desktop/web-learn-static/vue/2020-08-15-vue-04/作业/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3pvdWxhbi9EZXNrdG9wL3dlYi1sZWFybi1zdGF0aWMvdnVlLzIwMjAtMDgtMTUtdnVlLTA0L1x1NEY1Q1x1NEUxQS9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBnZXRJdGVtcyB9IGZyb20gIkAvYXBpL2luZGV4LmpzIjsKaW1wb3J0IHByaWNlIGZyb20gIkAvZmlsdGVycy9wcmljZS5qcyI7CmltcG9ydCBQYWdpbmF0aW9uIGZyb20gIkAvY29tcG9uZW50cy9QYWdpbmF0aW9uLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTWFpbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1MaXN0OiBbXSwKICAgICAgcGFnZTogMSwKICAgICAgdG90YWw6IDAsCiAgICAgIHByZXBhZ2U6IDEwCiAgICB9OwogIH0sCiAgZmlsdGVyczogewogICAgcHJpY2U6IHByaWNlCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBQYWdpbmF0aW9uOiBQYWdpbmF0aW9uCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgcnMsIHRva2VuOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMuJHJvdXRlLnF1ZXJ5KTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gZ2V0SXRlbXMoKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBycyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocnMpOyAvLyBsZXQge2RhdGE6e2l0ZW1zLHBhZ2UsdG90YWwscHJlcGFnZX19ID0gYXdhaXQgZ2V0SXRlbXMoKTsKICAgICAgICAgICAgICAvLyAgdGhpcy5pdGVtTGlzdCA9IGl0ZW1zOwoKICAgICAgICAgICAgICB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRva2VuKTsgLy/liKTmlq3mmK/lkKbnmbvlvZXkuobvvIzmsqHmnInnmbvlvZXkuobot7PliLDnmbvlvZXpobXvvIznmbvlvZXkuoblsLHmmL7npLoKICAgICAgICAgICAgICAvLyBsZXQgaXNMb2dpbiA9IHRydWU7CgogICAgICAgICAgICAgIGlmICghdG9rZW4pIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRJdGVtKCk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6ICdMb2dpbicKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflj5jkuoYnKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0SXRlbSgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZVBhZ2U6IGZ1bmN0aW9uIGNoYW5nZVBhZ2UocCkgewogICAgICBjb25zb2xlLmxvZygi54K55Ye755qE5LqL5Lu2IiwgcCwgdGhpcy5wYWdlKTsgLy8gaWYocCE9PXRoaXMucGFnZSl7CiAgICAgIC8v6YeN5paw5Y+R6YCB6K+35rGCCiAgICAgIC8vICAgIHRoaXMuZ2V0SXRlbSgpOwogICAgICAvLyB9CiAgICAgIC8v6YCa6L+HcXVlcnlTdHJpbmfmlLnlj5jlvZPliY3pobXpnaLnmoR1cmwKICAgICAgLy/lpoLmnpzkuKTmrKHot6/nlLHot7PovaznmoTmmK/lkIzkuIDkuKrnu4Tku7bvvIzov5nkuKrmmK/kuI3kvJrplIDmr4Hph43lu7rnmoTvvIzmmK/kvJrlpI3nlKjljp/mnaXnmoTvvIxjcmVhdGUoKeeUn+WRveWRqOacn+aYr+S4jeS8muaJp+ihjOeahAogICAgICAvLyAkcm91dGVyOiDlrp7pmYXkuIrlsLHmmK8gbmV3IFZ1ZVJvdXRlciDlvpfliLDnmoTlr7nosaHvvIzlroPku6PooajmnaXmlbTkuKrlupTnlKjnmoTot6/nlLHkv6Hmga/vvIzmj5Dkvpvot6/nlLHlhaznlKjnmoTphY3nva7kv6Hmga/lkozmlrnms5XvvIzmr5TlpoIgcHVzaAogICAgICAvLyAkcm91dGU6IOa7oei2s+W9k+WJjXVybOiAjOWIm+W7uueahOS4gOS4quWvueixoe+8jOi/meS4quWvueihqOmHjOmdouWtmOWCqOS4juW9k+WJjXVybOWMuemFjeeahOi3r+eUseS/oeaBrwoKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdNYWluJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgcGFnZTogcAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0SXRlbTogZnVuY3Rpb24gZ2V0SXRlbSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgX3lpZWxkJGdldEl0ZW1zLCBfeWllbGQkZ2V0SXRlbXMkZGF0YSwgaXRlbXMsIHBhZ2UsIHRvdGFsLCBwcmVwYWdlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gICB0aGlzLnBhZ2UgPSB0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiKysr5LuO6Lev55Sx5Lit5ou/5Yiw55qEcGFnZSsrKyIsIF90aGlzMy4kcm91dGUucXVlcnkucGFnZSk7CiAgICAgICAgICAgICAgICBfdGhpczMucGFnZSA9IHBhcnNlSW50KF90aGlzMy4kcm91dGUucXVlcnkucGFnZSk7IC8v6K+35rGC5a6M5oiQ5LmL5YmN77yMTWFpbue7hOS7tuWunumZheW3sue7j+S4i+a4suafk+S6hgoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRJdGVtcyh7CiAgICAgICAgICAgICAgICAgIHBhZ2U6IF90aGlzMy5wYWdlLAogICAgICAgICAgICAgICAgICBwcmVwYWdlOiBfdGhpczMucHJlcGFnZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF95aWVsZCRnZXRJdGVtcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgX3lpZWxkJGdldEl0ZW1zJGRhdGEgPSBfeWllbGQkZ2V0SXRlbXMuZGF0YTsKICAgICAgICAgICAgICAgIGl0ZW1zID0gX3lpZWxkJGdldEl0ZW1zJGRhdGEuaXRlbXM7CiAgICAgICAgICAgICAgICBwYWdlID0gX3lpZWxkJGdldEl0ZW1zJGRhdGEucGFnZTsKICAgICAgICAgICAgICAgIHRvdGFsID0gX3lpZWxkJGdldEl0ZW1zJGRhdGEudG90YWw7CiAgICAgICAgICAgICAgICBwcmVwYWdlID0gX3lpZWxkJGdldEl0ZW1zJGRhdGEucHJlcGFnZTsKICAgICAgICAgICAgICAgIC8v5b2T5pWw5o2u5Y+R55Sf5Y+Y5YyW5LmL5ZCO77yMTWFpbue7hOS7tumHjeaWsOa4suafk+S4gOasoQogICAgICAgICAgICAgICAgX3RoaXMzLml0ZW1MaXN0ID0gaXRlbXM7CiAgICAgICAgICAgICAgICBfdGhpczMucGFnZSA9IHBhZ2U7CiAgICAgICAgICAgICAgICBfdGhpczMudG90YWwgPSB0b3RhbDsKICAgICAgICAgICAgICAgIF90aGlzMy5wcmVwYWdlID0gcHJlcGFnZTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"main\">\n    <ul class=\"items-list\">\n      <router-link\n        :to=\"{ name: 'Detail', params: { id: item.id } }\"\n        class=\"panel\"\n        v-for=\"item of itemList\"\n        :key=\"item.id\"\n        tag=\"li\"\n      >\n        <!-- <router-link to='/detail/1'> -->\n        <img :src=\"item.cover\" alt=\"\" class=\"cover\" />\n        <!-- </router-link> -->\n        <div class=\"name\">{{ item.name }}</div>\n        <div class=\"price\">{{ item.price | price }}</div>\n      </router-link>\n    </ul>\n\n    <div class=\"pagination-container\">\n         <!-- <div class=\"pagination\">\n        <a href class=\"prev\">上一页</a>\n        <a href>1</a>\n        <a href>2</a>\n        <a href>3</a>\n        <a href class=\"current\">4</a>\n        <a href>5</a>\n        <a href>6</a>\n        <a href>7</a>\n        <a href>8</a>\n        <a href class=\"next\">下一页</a>\n      </div> -->\n     <Pagination :page.sync='page' :total='total' :prepage='prepage' @change=\"changePage\"></Pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getItems } from \"@/api/index.js\";\n\nimport price from \"@/filters/price.js\";\nimport Pagination from \"@/components/Pagination.vue\"\nexport default {\n  name: \"Main\",\n  data() {\n    return {\n      itemList: [],\n      page:1,\n      total:0,\n      prepage:10\n    };\n  },\n  filters: {\n    price,\n  },\n  components:{\n    Pagination\n  },\n  async created() {\n      console.log(this.$route.query)\n       let rs =await getItems();\n       console.log(rs)\n    // let {data:{items,page,total,prepage}} = await getItems();\n    //  this.itemList = items;\n     let token = localStorage.getItem('token')\n     console.log(token)\n    //判断是否登录了，没有登录了跳到登录页，登录了就显示\n    // let isLogin = true;\n    if (token) {\n        await this.getItem();\n  \n    } else {\n        this.$router.push({\n            name:'Login'\n        })\n    }\n  },\n    watch: {\n      async $route() {\n        console.log('变了');\n        await this.getItem();\n      }\n    },\n  methods:{\n      changePage(p){\n        console.log(\"点击的事件\",p,this.page)\n        // if(p!==this.page){\n            //重新发送请求\n        //    this.getItem();\n        // }\n\n        //通过queryString改变当前页面的url\n        //如果两次路由跳转的是同一个组件，这个是不会销毁重建的，是会复用原来的，create()生命周期是不会执行的\n        // $router: 实际上就是 new VueRouter 得到的对象，它代表来整个应用的路由信息，提供路由公用的配置信息和方法，比如 push\n        // $route: 满足当前url而创建的一个对象，这个对表里面存储与当前url匹配的路由信息\n        this.$router.push({\n            name:'Main',\n            query:{\n                page:p\n            }\n        })\n      },\n      async getItem(){\n        //   this.page = this.$route.query.page\n          console.log(\"+++从路由中拿到的page+++\",this.$route.query.page)\n          this.page = parseInt(this.$route.query.page)\n        //请求完成之前，Main组件实际已经下渲染了\n        let {\n            data: { items,page,total,prepage},\n        } = await getItems({\n            page:this.page,\n            prepage:this.prepage\n        });\n            //当数据发生变化之后，Main组件重新渲染一次\n        this.itemList = items;\n        this.page=page;\n        this.total = total;\n        this.prepage = prepage;\n      }\n  }\n};\n</script>\n<style></style>\n"],"sourceRoot":"src/views"}]}